<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generating discrete random variables with fabricatr • fabricatr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">fabricatr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/variable_generation.html">Generating Variables</a>
    </li>
    <li>
      <a href="../articles/resampling.html">Resampling</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced Features</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Ask for Help</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://declaredesign.org">DeclareDesign</a>
    </li>
    <li>
      <a href="http://randomizr.declaredesign.org">randomizr</a>
    </li>
    <li>
      <a href="http://fabricatr.declaredesign.org">fabricatr</a>
    </li>
    <li>
      <a href="http://estimatr.declaredesign.org">estimatr</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://declaredesign.org">DeclareDesign home</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DeclareDesign/fabricatr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Generating discrete random variables with fabricatr</h1>
                        <h4 class="author">Aaron Rudkin</h4>
            
          </div>

    
    
<div class="contents">
<div id="fabricating-discrete-random-variables-" class="section level1">
<h1 class="hasAnchor">
<a href="#fabricating-discrete-random-variables-" class="anchor"></a>Fabricating discrete random variables.</h1>
<p><strong>fabricatr</strong> provides a convenient helper function, <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a>, which you can use to generate discrete random variables far more easily than using R’s built-in data generation mechanisms. Below, we introduce you to the types of data you can generate using <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a>.</p>
</div>
<div id="binary-and-binomial-outcomes" class="section level1">
<h1 class="hasAnchor">
<a href="#binary-and-binomial-outcomes" class="anchor"></a>Binary and binomial outcomes</h1>
<p>The simplest possible type of data, and <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a>’s default, is a binary random variable (also called a bernoulli random variable). Generating a binary random variable requires only one parameter <code>x</code> which specifies the probability that outcomes drawn from this variable are equal to 1. By default, <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> will generate <code>N = length(x)</code> draws. <code>N</code> can also be specified explicitly. Consider these examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">draw_discrete_ex =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, <span class="dt">p =</span> <span class="kw">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>, <span class="dv">1</span>), 
                             <span class="dt">binary_1 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">x =</span> p),
                             <span class="dt">binary_2 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, <span class="dt">x =</span> <span class="fl">0.5</span>))</code></pre></div>
<p><a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> additionally takes an argument <code>type</code>, which specifies which type of random variable you wish to draw outcomes from. The default argument here is “binary” – other aliases include “bernoulli” or “binomial”. A simple alias to <code><a href="../reference/draw_discrete.html">draw_discrete(type="binary")</a></code> is <a href="../reference/draw_binary.html"><code>draw_binary)</code></a>. All of the variables created here are equivalent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">binary_alias_ex =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, 
                            <span class="dt">binary_1 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, <span class="dt">x =</span> <span class="fl">0.5</span>, <span class="dt">type=</span><span class="st">"binary"</span>),
                            <span class="dt">binary_2 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, <span class="dt">x =</span> <span class="fl">0.5</span>, <span class="dt">type=</span><span class="st">"bernoulli"</span>),
                            <span class="dt">binary_3 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, <span class="dt">x =</span> <span class="fl">0.5</span>, <span class="dt">type=</span><span class="st">"binomial"</span>),
                            <span class="dt">binary_4 =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_binary</a></span>(<span class="dt">N =</span> N, <span class="dt">x =</span> <span class="fl">0.5</span>)
)</code></pre></div>
<p>In addition to binary variables, <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> supports repeated Bernoulli trials (“binomial” data). This requires specifying an argument <code>k</code>, equal to the number of trials.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">binomial_ex =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, 
                        <span class="dt">freethrows =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, 
                                                   <span class="dt">x =</span> <span class="fl">0.5</span>, 
                                                   <span class="dt">k =</span> <span class="dv">10</span>, 
                                                   <span class="dt">type =</span> <span class="st">"binomial"</span>)
                        )</code></pre></div>
<p>Some researchers may be interested in specifying probabilities through a “link function”. This can be done in <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> through the <code>link</code> argument. The default link function is “identity”, but we also support “logit”, and “probit”. These link functions transform continuous and unbounded latent data into probabilities of a positive outcome.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bernoulli_probit =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, <span class="dt">x =</span> <span class="dv">10</span><span class="op">*</span><span class="kw">rnorm</span>(N), 
                             <span class="dt">binary =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">x =</span> x, 
                                                    <span class="dt">type =</span> <span class="st">"bernoulli"</span>, 
                                                    <span class="dt">link =</span> <span class="st">"probit"</span>))</code></pre></div>
</div>
<div id="ordered-outcomes" class="section level1">
<h1 class="hasAnchor">
<a href="#ordered-outcomes" class="anchor"></a>Ordered outcomes</h1>
<p>Some researchers may be interested in generating ordered outcomes – for example, Likert scale outcomes. This can be done using the “ordered” type. Ordered variables require a vector of breakpoints, supplied as the argument <code>breaks</code> – points at which the underlying latent variable switches from category to category. The first break should always be below the lower bound of the data, while the final break should always be above the upper bound of the data.</p>
<p>In the following example, each of three observations has a latent variable <code>x</code> which is continuous and unbounded. The variable <code>ordered</code> transforms <code>x</code> into three numeric categories: 1, 2, and 3. All values of <code>x</code> below -1 result in <code>ordered</code> 1; all values of <code>x</code> between -1 and 1 result in <code>ordered</code> 2; all values of <code>x</code> above 1 result in <code>ordered</code> 3:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ordered_example =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, 
                            <span class="dt">x =</span> <span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="kw">rnorm</span>(N), 
                            <span class="dt">ordered =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(x, 
                                                    <span class="dt">type =</span> <span class="st">"ordered"</span>, 
                                                    <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="ot">Inf</span>, <span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">Inf</span>)
                                                    )
                            )</code></pre></div>
<p>Ordered data also supports link functions including “logit” or “probit”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ordered_probit_example =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, 
                                   <span class="dt">x =</span> <span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="kw">rnorm</span>(N), 
                                   <span class="dt">ordered =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(x, 
                                                           <span class="dt">type =</span> <span class="st">"ordered"</span>, 
                                                           <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="ot">Inf</span>, <span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">Inf</span>), 
                                                           <span class="dt">link =</span> <span class="st">"probit"</span>
                                                           )
                                   )</code></pre></div>
</div>
<div id="count-outcomes" class="section level1">
<h1 class="hasAnchor">
<a href="#count-outcomes" class="anchor"></a>Count outcomes</h1>
<p><a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> supports Poisson-distributed count outcomes. These require that the user specify the parameter <code>x</code>, equal to the Poisson distribution mean (often referred to as <code>lambda</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">count_outcome_example =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">3</span>, 
                                  <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">100</span>), 
                                  <span class="dt">count =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(x, <span class="dt">type =</span> <span class="st">"count"</span>))</code></pre></div>
</div>
<div id="categorical-data" class="section level1">
<h1 class="hasAnchor">
<a href="#categorical-data" class="anchor"></a>Categorical data</h1>
<p><a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> can also generate non-ordered, categorical data. Users must provide a vector of probabilities for each category (or a matrix, if each observation should have separate probabilities), as well as setting <code>type</code> to be “categorical”.</p>
<p>If probabilities do not sum to exactly one, they will be normalized, but negative probabilities will cause an error.</p>
<p>In the first example, each unit has a different set of probabilities and the probabilities are provided as a matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">categorical_example =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">6</span>, 
                                <span class="dt">p1 =</span> <span class="kw">runif</span>(N, <span class="dv">0</span>, <span class="dv">1</span>),
                                <span class="dt">p2 =</span> <span class="kw">runif</span>(N, <span class="dv">0</span>, <span class="dv">1</span>),
                                <span class="dt">p3 =</span> <span class="kw">runif</span>(N, <span class="dv">0</span>, <span class="dv">1</span>),
                                <span class="dt">cat =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, 
                                                    <span class="dt">x =</span> <span class="kw">cbind</span>(p1, p2, p3), 
                                                    <span class="dt">type =</span> <span class="st">"categorical"</span>)
                                )</code></pre></div>
<p>In the second example, each unit has the same probability of getting a given category. <a href="../reference/draw_discrete.html"><code><a href="../reference/draw_discrete.html">draw_discrete()</a></code></a> will issue a warning to remind you that it is interpreting the vector in this way.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">warn_draw_discrete_example =<span class="st"> </span><span class="kw"><a href="../reference/fabricate.html">fabricate</a></span>(<span class="dt">N =</span> <span class="dv">6</span>, 
                                       <span class="dt">cat =</span> <span class="kw"><a href="../reference/draw_discrete.html">draw_discrete</a></span>(<span class="dt">N =</span> N, 
                                                           <span class="dt">x =</span> <span class="kw">c</span>(<span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span>), 
                                                           <span class="dt">type =</span> <span class="st">"categorical"</span>)
                                       )</code></pre></div>
<pre><code>## Warning in draw_discrete(N = N, x = c(0.2, 0.4, 0.4), type =
## "categorical"): For a categorical (multinomial) distribution, a matrix of
## probabilities should be provided. Data generated by interpreting vector of
## category probabilities, identical for each observation.</code></pre>
<p>“categorical” variables can also use link functions, for example to generate multinomial probit data.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#fabricating-discrete-random-variables-">Fabricating discrete random variables.</a></li>
      <li><a href="#binary-and-binomial-outcomes">Binary and binomial outcomes</a></li>
      <li><a href="#ordered-outcomes">Ordered outcomes</a></li>
      <li><a href="#count-outcomes">Count outcomes</a></li>
      <li><a href="#categorical-data">Categorical data</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright" style="flex:2;">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys.</p>
  <p>Code is licensed under <a href="https://opensource.org/licenses/mit-license.php">MIT</a> license.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
